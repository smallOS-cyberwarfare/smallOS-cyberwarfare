curl https://http-observatory.security.mozilla.org/api/v1/analyze?host=www.mozilla.org


{
  "end_time": "Thu, 15 Sep 2016 15:05:12 GMT",
  "grade": "C+",
  "response_headers": {
    "CF-Cache-Status": "HIT",
    "CF-RAY": "2e2cf9b4330b07df-LAX",
    "Cache-Control": "max-age=600",
    "Connection": "keep-alive",
    "Content-Encoding": "gzip",
    "Content-Type": "text/html; charset=utf-8",
    "Date": "Thu, 15 Sep 2016 15:05:11 GMT",
    "Expires": "Thu, 15 Sep 2016 15:14:49 GMT",
    "Server": "cloudflare-nginx",
    "Transfer-Encoding": "chunked",
    "Vary": "Accept-Encoding",
    "X-Backend-Server": "4cbb07faf540.bedrock-prod.us-west.moz.works",
    "X-Clacks-Overhead": "GNU Terry Pratchett",
    "X-Frame-Options": "DENY",
    "X-Robots-Tag": "noodp",
    "strict-transport-security": "max-age=31536000"
  },
  "scan_id": 1650089,
  "score": 60,
  "start_time": "Thu, 15 Sep 2016 15:05:08 GMT",
  "state": "FINISHED",
  "tests_failed": 3,
  "tests_passed": 8,
  "tests_quantity": 11
}


curl https://http-observatory.security.mozilla.org/api/v1/getScanResults?scan=1650089

{
  "content-security-policy": {
    "expectation": "csp-implemented-with-no-unsafe",
    "name": "content-security-policy",
    "output": {
      "data": null
    },
    "pass": false,
    "result": "csp-not-implemented",
    "score_description": "Content Security Policy (CSP) header not implemented",
    "score_modifier": -25
  },
  "contribute": {
    "expectation": "contribute-json-with-required-keys",
    "name": "contribute",
    "output": {
      "data": {
        "bugs": {
          "list": "https://bugzilla.mozilla.org/describecomponents.cgi?product=www.mozilla.org",
          "mentored": "https://bugzilla.mozilla.org/buglist.cgi?f1=bug_mentor&o1=isnotempty&query_format=advanced&bug_status=NEW&product=www.mozilla.org&list_id=10866041",
          "report": "https://bugzilla.mozilla.org/enter_bug.cgi?product=www.mozilla.org"
        },
        "description": "The app powering www.mozilla.org.",
        "name": "Bedrock",
        "participate": {
          "docs": "http://bedrock.readthedocs.org/",
          "home": "https://wiki.mozilla.org/Webdev/GetInvolved/mozilla.org",
          "irc": "irc://irc.mozilla.org/#www",
          "irc-contacts": [
            "agibson",
            "craigcook",
            "pmac",
            "bensternthal",
            "espressive",
            "jgmize",
            "jpetto",
            "kohei",
            "malexis",
            "sgarrity"
          ],
          "mailing-list": "https://www.mozilla.org/about/forums/#dev-mozilla-org"
        },
        "urls": {
          "demo1": "https://www-demo1.allizom.org",
          "demo2": "https://www-demo2.allizom.org",
          "demo3": "https://www-demo3.allizom.org",
          "demo4": "https://www-demo4.allizom.org",
          "demo5": "https://www-demo5.allizom.org",
          "dev": "https://www-dev.allizom.org",
          "prod": "https://www.mozilla.org",
          "stage": "https://www.allizom.org"
        }
      }
    },
    "pass": true,
    "result": "contribute-json-with-required-keys",
    "score_description": "Contribute.json implemented with the required contact information",
    "score_modifier": 0
  },
  "cookies": {
    "expectation": "cookies-secure-with-httponly-sessions",
    "name": "cookies",
    "output": {
      "data": null
    },
    "pass": true,
    "result": "cookies-not-found",
    "score_description": "No cookies detected",
    "score_modifier": 0
  },
  "cross-origin-resource-sharing": {
    "expectation": "cross-origin-resource-sharing-not-implemented",
    "name": "cross-origin-resource-sharing",
    "output": {
      "data": {
        "acao": null,
        "clientaccesspolicy": null,
        "crossdomain": null
      }
    },
    "pass": true,
    "result": "cross-origin-resource-sharing-not-implemented",
    "score_description": "Content is not visible via cross-origin resource sharing (CORS) files or headers",
    "score_modifier": 0
  },
  "public-key-pinning": {
    "expectation": "hpkp-not-implemented",
    "name": "public-key-pinning",
    "output": {
      "data": null,
      "includeSubDomains": false,
      "max-age": null,
      "numPins": null,
      "preloaded": false
    },
    "pass": true,
    "result": "hpkp-not-implemented",
    "score_description": "HTTP Public Key Pinning (HPKP) header not implemented",
    "score_modifier": 0
  },
  "redirection": {
    "expectation": "redirection-to-https",
    "name": "redirection",
    "output": {
      "destination": "https://www.mozilla.org/en-US/",
      "redirects": true,
      "route": [
        "http://www.mozilla.org/",
        "https://www.mozilla.org/",
        "https://www.mozilla.org/en-US/"
      ],
      "status_code": 200
    },
    "pass": true,
    "result": "redirection-to-https",
    "score_description": "Initial redirection is to https on same host, final destination is https",
    "score_modifier": 0
  },
  "strict-transport-security": {
    "expectation": "hsts-implemented-max-age-at-least-six-months",
    "name": "strict-transport-security",
    "output": {
      "data": "max-age=31536000",
      "includeSubDomains": false,
      "max-age": 31536000,
      "preload": false,
      "preloaded": false
    },
    "pass": true,
    "result": "hsts-implemented-max-age-at-least-six-months",
    "score_description": "HTTP Strict Transport Security (HSTS) header set to a minimum of six months (15768000)",
    "score_modifier": 0
  },
  "subresource-integrity": {
    "expectation": "sri-implemented-and-external-scripts-loaded-securely",
    "name": "subresource-integrity",
    "output": {
      "data": {}
    },
    "pass": true,
    "result": "sri-not-implemented-but-all-scripts-loaded-from-secure-origin",
    "score_description": "Subresource Integrity (SRI) not implemented, but all scripts are loaded from a similar origin",
    "score_modifier": 0
  },
  "x-content-type-options": {
    "expectation": "x-content-type-options-nosniff",
    "name": "x-content-type-options",
    "output": {
      "data": null
    },
    "pass": false,
    "result": "x-content-type-options-not-implemented",
    "score_description": "X-Content-Type-Options header not implemented",
    "score_modifier": -5
  },
  "x-frame-options": {
    "expectation": "x-frame-options-sameorigin-or-deny",
    "name": "x-frame-options",
    "output": {
      "data": "DENY"
    },
    "pass": true,
    "result": "x-frame-options-sameorigin-or-deny",
    "score_description": "X-Frame-Options (XFO) header set to SAMEORIGIN or DENY",
    "score_modifier": 0
  },
  "x-xss-protection": {
    "expectation": "x-xss-protection-1-mode-block",
    "name": "x-xss-protection",
    "output": {
      "data": null
    },
    "pass": false,
    "result": "x-xss-protection-not-implemented",
    "score_description": "X-XSS-Protection header not implemented",
    "score_modifier": -10
  }
}


19:44 <April> you do GET /api/v1/analyze?host=foo
19:44 <April> look at state
19:44 <gregglind> that is what I was planning
19:45 <April> keep polling until it is either ABORTED, FAILED, or FINISHED

